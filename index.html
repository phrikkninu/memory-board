<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô</title>
  <style>
    body {
      font-family: 'EucrosiaUPC', sans-serif;
      background: linear-gradient(to bottom right, #fff8e1, #ffecb3);
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #ffca28;
      color: #4e342e;
      padding: 20px;
      text-align: center;
      font-size: 24pt;
    }
    .memory-board {
      padding: 20px;
    }
    .memory {
      background-color: #fff3e0;
      border: 2px solid #ffcc80;
      border-radius: 15px;
      padding: 15px;
      margin-bottom: 20px;
      font-size: 18pt;
      position: relative;
    }
    .memory img {
      max-width: 100%;
      height: auto;
      margin-top: 10px;
      border-radius: 10px;
      display: block;
    }
    .editable {
      outline: none;
    }
    .upload-section {
      margin-top: 10px;
    }
    .upload-btn, .delete-btn {
      margin-right: 10px;
      padding: 5px 10px;
      font-size: 14pt;
      background-color: #ffb300;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .remove-img-btn {
      display: block;
      background-color: crimson;
      color: white;
      border: none;
      border-radius: 6px;
      margin: 5px 0;
      padding: 5px;
      font-size: 12pt;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 10px;
      background-color: #ffe082;
      color: #5d4037;
      font-size: 14pt;
    }
    button.download {
      margin-top: 10px;
      padding: 10px;
      font-size: 16pt;
      background-color: #ffb300;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡πÄ‡∏£‡∏≤</header>
  <div class="memory-board" id="memoryBoard">
    <div class="memory editable" contenteditable="true">
      üìù ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó... ‡∏°‡∏±‡∏ô‡∏ï‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏ã‡∏∂‡πâ‡∏á‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏•‡πà‡∏∞?
    </div>
    <div class="memory editable" contenteditable="true">
      üéµ ‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏°‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏∑‡∏ô ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞
    </div>
    <div class="memory editable" contenteditable="true">
      üåßÔ∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ù‡∏ô‡∏ï‡∏Å... ‡πÅ‡∏ï‡πà‡πÄ‡∏ò‡∏≠‡∏¢‡∏¥‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏â‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡πÜ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠ ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
    </div>
    <div class="memory editable" contenteditable="true">
      üí¨ ‡∏Ñ‡∏≥‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ô LINE ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏£‡∏≠... ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏•‡∏∑‡∏°‡πÄ‡∏•‡∏¢ "‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ã‡πå ‡πÄ‡∏â‡∏¥‡∏ô..."
    </div>
    <div class="memory editable" contenteditable="true">
      üíõ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î... ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ò‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ "‡∏£‡∏±‡∏Å‡∏ô‡∏∞ ‡πÇ‡∏ü‡∏Å‡∏±‡∏™ ‡∏à‡∏∏‡πä‡∏ö‡πÜ"
    </div>
<div class="memory editable" contenteditable="true">
      üíõ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ(22 ‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô 2568 ‡∏´‡∏£‡∏∑‡∏≠ 2025)‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ã‡πå‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô... ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏±‡∏ô‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏à‡∏£‡∏¥‡∏á ‡πÜ
    </div>
<div class="memory editable" contenteditable="true">
      üíõ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤...‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πá‡∏ï‡∏≤‡∏°...
    </div>
    <div class="memory" id="customImageMemory">
      <div class="editable" contenteditable="true">üì∑ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏†‡∏≤‡∏û</div>
      <div class="upload-section">
        <input type="file" accept="image/*" multiple onchange="previewMultipleImages(this, 'custom')" />
      </div>
    </div>
    <button class="download" onclick="downloadPDF()">üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô PDF</button>
  </div>
  <footer>üíõ ‡πÇ‡∏ü‡∏Å‡∏±‡∏™(Focus) ‡πÅ‡∏•‡∏∞ ‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ã‡πå ‡πÄ‡∏â‡∏¥‡∏ô(Alex Chen) üíõ</footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    function downloadPDF() {
      const opt = {
        margin: 0.5,
        filename: 'memory-board.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      html2pdf().from(document.body).set(opt).save();
    }

    function compressImage(file, callback) {
      const reader = new FileReader();
      reader.onload = function (event) {
        const img = new Image();
        img.onload = function () {
          const canvas = document.createElement('canvas');
          const MAX_WIDTH = 854; // ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 480p (854x480)
          const scaleSize = MAX_WIDTH / img.width;
          canvas.width = MAX_WIDTH;
          canvas.height = img.height * scaleSize;

          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

          const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.7);
          callback(compressedDataUrl);
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    }

    function previewMultipleImages(input, keyPrefix) {
      const memoryElement = input.closest('.memory');
      const galleryKey = 'gallery-' + keyPrefix;
      let urls = JSON.parse(localStorage.getItem(galleryKey) || '[]');

      [...input.files].forEach(file => {
        compressImage(file, (compressedUrl) => {
          const wrapper = document.createElement('div');
          const img = document.createElement('img');
          const btn = document.createElement('button');

          wrapper.classList.add('img-wrapper');
          img.src = compressedUrl;
          btn.innerText = '‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ';
          btn.className = 'remove-img-btn';

          btn.onclick = function () {
            wrapper.remove();
            urls = urls.filter(url => url !== compressedUrl);
            localStorage.setItem(galleryKey, JSON.stringify(urls));
          };

          wrapper.appendChild(img);
          wrapper.appendChild(btn);
          memoryElement.appendChild(wrapper);

          urls.push(compressedUrl);
          localStorage.setItem(galleryKey, JSON.stringify(urls));
        });
      });
    }

    document.querySelectorAll('.editable').forEach((el, i) => {
      el.parentElement.dataset.key = i;
      const saved = localStorage.getItem('memory-' + i);
      if (saved) el.innerHTML = saved;
      el.addEventListener('input', () => {
        localStorage.setItem('memory-' + i, el.innerHTML);
      });
    });

    const customMemory = document.getElementById('customImageMemory');
    const galleryKey = 'gallery-custom';
    let urls = JSON.parse(localStorage.getItem(galleryKey) || '[]');

    urls.forEach(url => {
      const wrapper = document.createElement('div');
      const img = document.createElement('img');
      const btn = document.createElement('button');
      wrapper.classList.add('img-wrapper');
      img.src = url;
      btn.innerText = '‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ';
      btn.className = 'remove-img-btn';
      btn.onclick = function () {
        wrapper.remove();
        urls = urls.filter(u => u !== url);
        localStorage.setItem(galleryKey, JSON.stringify(urls));
      };
      wrapper.appendChild(img);
      wrapper.appendChild(btn);
      customMemory.appendChild(wrapper);
    });
  </script>
</body>
</html>
